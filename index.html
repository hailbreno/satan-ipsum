<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Satan-ipsum by keithhamilton</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
<body>
        <img src='images/pentagram.png' width='250' height='250'/>
        <br/>
        <h2>Satan Ipsum: an ipsum generator for the rest of us</h2>
        <hr/>
        <label for='paragraphCount'>Number of paragraphs</label>
        <input type='text' id='paragraphCount' value='4'/>
        <br/>
        <label for='sentenceLength'>Sentence Length Variance</label>
        <input type='range' id='sentenceLength' value='0' min='-4' max='4'/>
        <br/><br/> 
        <button id='generate'>Generate!</button>
        <br/>
        <div style='width:400px;height:auto;margin-top:20px;' id='generatedText'></div>
</body>
<script>
    words = [
        'satan',
        'hatred',
        'blackness',
        'blood',
        'rivers of blood',
        'fire',
        'pain',
        'wheel of pain',
        'burned alive',
        'eternity',
        'desecrated souls',
        'hopeless',
        'lightbringer',
        'unending torture',
        'darkness eternal',
        'cloven feet',
        'pitchfork',
        'infinite abyss',
        'nine circles',
        'natas',
        'circling demons',
        'Old Nick cometh',
        'black mass',
        'Lucifer',
        'Beelzebub',
        'chief of demons',
        'bow before the deceiver',
        'devourer of souls',
        'lies',
        'deceiver',
        'Abbadon',
        'dark prince',
        'Morningstar',
        'pit of snakes',
        'drinking blood',
        'undying agony',
        'suffering',
        'everlasting fire',
        'torment unending',
        'inferno',
        'place of the condemned',
        'forever punished',
        'excruciating flame',
        'agonizing',
        'bottomless pit of the damned'
    ]

    
    function randomInRange(min,max){
        return Math.floor(Math.random()*(max-min)+min);
    }

    function generate_paragraph(count, sentenceVariance){
        var paragraph_min_sentences=2;
        var paragraph_max_sentences=6;
        var sentence_min_length=5-sentenceVariance;
        var sentence_max_length=15+sentenceVariance;


        var output='';
        for(var p=0;p<count;p++){
            var paragraph;
            if(p==0){
                paragraph = ''; 
            }
            else{
                paragraph = '';
            }
            var paragraph_sentence_count=randomInRange(paragraph_min_sentences,paragraph_max_sentences)
            for(var i=0;i<paragraph_sentence_count;i++){
                var sentence='';
                var sentence_length = randomInRange(sentence_min_length,sentence_max_length);
                var last_word_index=0;
                for(var j=0;j<sentence_length;j++){
                    var index = randomInRange(0,words.length);
                    //if the index is the same as the last index pick another one.
                    while(index === last_word_index){
                        index = randomInRange(0,words.length);
                    }
                    last_word_index=index;

                    sentence+=words[index];
                    if(j < sentence_length-1){
                        sentence+=' ';
                    }
                }
                sentence += '. ';
                sentence = sentence[0].toUpperCase() + sentence.substring(1,sentence.length);
                paragraph+=sentence;
            }

        if(p === 0){
          paragraph = "Satan ipsum " + paragraph[0].toLowerCase() + paragraph.substring(1,paragraph.length);
        }    
        output+=paragraph;
        output+='<br/><br/>';
        
        }
        return output;
    }

    var generate_button = document.getElementById('generate');
    var targetTextArea = document.getElementById('generatedText');

    

    generate_button.addEventListener('click', function(){
        var paragraphInput = document.getElementById('paragraphCount');
        var nParagraphs = parseInt(paragraphInput.value);

        var sentenceVariance = parseInt(document.getElementById('sentenceLength').value);

        var generatedText = generate_paragraph(nParagraphs,sentenceVariance);
        targetTextArea.innerHTML = generatedText;
    })

</script>
</html>